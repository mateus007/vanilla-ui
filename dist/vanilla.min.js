var V=function(e){"use strict";var t=[];function n(e,n){if(void 0===n)return t[e]?t[e]:[];t[e]=t[e]||[],t[e].push(n)}function r(e,t){if(Array.isArray(e))return e.forEach(t);var n=Object.keys(e);for(var r of n)t(e[r],r,e)}function o(e,t){var n=e.split(".");return{event:n.shift(),namespace:n.join("."),callback:t}}function a(e){return e=(e="string"==typeof e?i(e):e)instanceof Node?e:document}function i(e,t){return a(t).querySelector(e)}function c(e,t){return a(t).querySelectorAll(e)}function s(e,t){var n=[];return"string"==typeof e&&(e=c(e,t)),e instanceof Window&&n.push(e),e instanceof Document&&n.push(e),e instanceof Element&&n.push(e),e instanceof NodeList&&Array.prototype.forEach.call(e,function(e){n.push(e)}),n}var u=[];function f(e,t,n,r,a){var i=n.split(" ");if(!(i.length>1)){var c,l=s(t);void 0===a?(c=r,r=null):c=function(e){var t=e.target.closest(r);t&&a.apply(t,[e])};var p=o(n,c);return"add"===e?(u.push(p),l.forEach(function(e){e.addEventListener(p.event,p.callback.bind(e),!1)})):u=u.filter(function(e){var t=Boolean(!(p.event&&p.event===e.event||p.namespace&&p.namespace===e.namespace||"function"==typeof c&&c===e.callback));return t||l.forEach(function(t){t.removeEventListener(e.event,e.callback.bind(t),!1)}),t}),c}for(var h=0;h<i.length;h++)f(e,t,i[h],r,a)}function l(e,t,n,r){return f("add",e,t,n,r)}function p(e,t,n,r){return f("remove",e,t,n,r)}function h(e,t,n){var r=n?s(n,e):s(e),o=new Event(t,{bubbles:!0,cancelable:!0});r.forEach(function(e){e.dispatchEvent(o)})}async function v(){}async function d(e,t,n){try{return await t.apply(e,n)}catch(e){return Promise.reject(e)}}async function m(e,t){var n=[];for(let r=0;r<t.length;r++)"function"==typeof t[r]&&n.push(d(e,t[r]));return await Promise.all(n),e}var y=[];function g(e,t){y.push(o(e,t))}function b(e,t){var n=o(e,t);y=y.filter(function(e){return Boolean(!(n.event&&n.event===e.event||n.namespace&&n.namespace===e.namespace||void 0!==n.callback&&n.callback===e.callback))})}function w(e,t){var n=o(e),r=[];return y.forEach(function(e){n.event&&n.event!==e.event||n.namespace&&n.namespace!==e.namespace||r.push(d({},e.callback,[t]))}),Promise.all(r)}var _={};function E(e){return e.replace(/\s+/g," ").replace(/^{{\s?/,"").replace(/\s?}}$/,"")}function $(e){return e.replace(/^if\s?(.*)$/,"if( $1 ){").replace(/^elseif\s?(.*)$/,"}else if( $1 ){").replace(/^else$/,"}else{").replace(/^end$/,"}")}function j(e){return e.replace(/^for\s?(.*)\sin\s(.*)$/,"for( var $1 in $2 ){").replace(/^each\s?(.*)\s?=>\s?(.*)\sin\s(.*)$/,"for( var $1 in $3 ){ var $2 = $3[$1];").replace(/^each\s?(.*)\sin\s(.*)$/,"for( var _$1 in $2 ){ var $1 = $2[_$1];")}function A(e){var t=[],n=function(n){var r=e.match(n);r&&t.push(r[1])};return null===e.match(/^(}|for\(|if\()/)&&n(/^([A-Za-z0-9_]+)/),n(/^if\(\s?!?([A-Za-z0-9_]+)/),n(/^}else\sif\(\s?!?([A-Za-z0-9_]+)/),n(/&&\s?!?([A-Za-z0-9_]+)/),n(/\|\|\s?!?([A-Za-z0-9_]+)/),n(/in\s([A-Za-z0-9_]+)\s\)/),t}function O(e,t){var n,o=/{{([^}}]+)?}}/g,a=[],i=0,c="",s="",u="";for(r(t=Object.assign({},_,t||{}),function(e,t){a.push("var "+t+' = this["'+t+'"];')}),a.push("var r = [];");n=o.exec(e);)c=j(c=$(c=E(n[0]))),s=e.slice(i,n.index),i=n.index+n[0].length,a.push("r.push(`"+s.replace(/"/g,'\\"')+"`);"),A(c).filter(function(e){void 0===t[e]&&a.push("var "+e+";")}),a.push(c.match(/^(}|{|for\(|if\()/)?c:"r.push("+c+");");u=e.substring(i,i+(e.length-i)),a.push("r.push(`"+u.replace(/"/g,'\\"')+"`);"),a.push('return r.join("");');var f=a.join("\n");try{var l=new Function(f.replace(/[\r\t\n]/g,"")).apply(t||{})}catch(t){console.warn("[V] template parser error:",e,t)}return l}var R=[],C={element:null,selector:null,namespace:null,constructor:v,destructor:v};function S(e){Object.assign(C,e)}function D(e,t){R.forEach(function(n){s(n.selector,e).forEach(function(e){void 0===e._components&&(e._components={}),void 0===e._state&&(e._state={}),t.apply(e,[e,n])})})}function k(e){n("componentBeforeDestroy",e)}async function x(e){var t=[];return D(e,function(e,r){var o=r.namespace;if(void 0!==e._components[o]){var a=e._components[o];delete e._components[o];var i=[].concat(n("componentBeforeDestroy"),[a.beforeDestroy],[a.onDestroy],[a.afterDestroy],n("componentAfterDestroy"));t.push(m(a,i))}}),await Promise.all(t),e}function I(e){n("componentAfterMount",e)}async function M(e){var t=[];return D(e,function(e,r){var o=r.namespace;if(void 0===e._components[o]){e.dataset.vid||(e.dataset.vid=Math.random().toString(16).substring(2,10));var a=Object.assign({},r);a.element=e,e._components[o]=a;var i=[].concat(n("componentBeforeMount"),[a.beforeMount],[a.onMount],[a.afterMount],n("componentAfterMount"));t.push(m(a,i))}}),await Promise.all(t),e}async function B(e,t,r,o){var a={method:e,url:t,data:r,headers:o};await m(a,n("httpInterceptBefore"));var i=Object.assign({},a);if(delete i.url,delete i.data,"GET"!=i.method)void 0!==i.body&&null!==i.body||(i.body=a.data,i.body instanceof FormData==!1&&(i.body=JSON.stringify(i.body),i.headers["Content-Type"]="application/json; charset=utf8"));else{var c="";"string"==typeof a.data?c=a.data:a.data&&(c=Object.keys(a.data).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a.data[e])}).join("&")),c&&(a.url+="?"+c)}var s=await fetch(a.url,i),u=await s.text();try{u=JSON.parse(u)}catch(e){}var f={request:a,response:s,body:u};if(await m(f,n("httpInterceptAfter")),!s.ok)throw f;return u}S({beforeDestroy:v,onDestroy:v,afterDestroy:v}),S({on:function(e,t,n){void 0===n&&(n=t,t="");var r=this.element,o=[e,this.namespace,r.dataset.vid].join(".");return l(r,o,t,n)},off:function(e,t){var n=this.element,r=[e,this.namespace,n.dataset.vid].join(".");return p(n,r,t)},trigger:function(e,t){var n=this.element,r=[e,this.namespace,n.dataset.vid].join(".");return h(n,r,t)}}),k(async function(){return this.off()}),S({watch:function(e,t){return g([e,this.namespace,this.element.dataset.vid].join("."),t)},unwatch:function(e,t){return b([e,this.namespace,this.element.dataset.vid].join("."),t)},fire:function(e,t){return w([e,this.namespace,this.element.dataset.vid].join("."),t)}}),k(async function(){return this.unwatch()}),S({beforeMount:v,onMount:v,afterMount:v}),S({template:v,renderTemplate:async function(){var e=this.element.innerHTML,t=await this.template();if(null!=t&&!1!==t){var n=this.get(),r=O(String(t),n);r!=e&&(await x(this.element),this.element.innerHTML=r)}},shouldRender:async function(){return!0},beforeRender:v,onRender:v,afterRender:v,render:async function(e){void 0!==e&&this.set(e);if(await this.shouldRender())try{var t=[].concat(n("componentBeforeRender"),[this.beforeRender],[this.renderTemplate],[this.onRender],[this.afterRender],n("componentAfterRender"));await m(this,t),await M(this.element)}catch(e){console.warn("[V] Component render error:",e)}}}),I(async function(){return this.render()}),S({set:function(e,t){var n=this.element;"string"==typeof e?n._state[e]=t:n._state=Object.assign(n._state,e)},get:function(e,t){var n=this.element;if(void 0===e)return n._state;var r=n._state[e];return r=void 0===r?t:r},clone:function(e,t){var n=this.get(e,t);return n instanceof Object?Object.assign({},n):n}});var P=Object.freeze({__proto__:null,interceptBefore:function(e){n("httpInterceptBefore",e)},interceptAfter:function(e){n("httpInterceptAfter",e)},request:B,options:function(e,t,n){return B("OPTIONS",e,t,n)},head:function(e,t,n){return B("HEAD",e,t,n)},get:function(e,t,n){return B("GET",e,t,n)},post:function(e,t,n){return B("POST",e,t,n)},put:function(e,t,n){return B("PUT",e,t,n)},patch:function(e,t,n){return B("PATCH",e,t,n)},_delete:function(e,t,n){return B("DELETE",e,t,n)}}),T={path:null,regex:null,_query:{},_params:{},param(e){return void 0===e?this._params:void 0!==this._params[e]?this._params[e]:void 0},query(e){return void 0===e?this._query:void 0!==this._query[e]?this._query[e]:void 0},location(){var e=this._params,t=this.path;for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(":"+n,e[n]));return t}},q=[],z=T,N={mode:window.history.pushState?"history":"hash",base:"",prevent:!1};function Z(e,t){return e=("/"+(e=(e=(e=(e=(e=e.replace(window.location.origin,"")).replace(N.base,"")).replace("/?","?")).replace(new RegExp("[/]*$"),"")).replace(new RegExp("^[/]*"),""))).replace("//","/"),t&&(e=e.split("?")[0]),e}async function L(e,t){try{e=Z(e);var r={previous:z,next:U(e),location:e,replace:t};await m(r,[].concat(n("routeBeforeChange"),[function(){this.replace&&(N.prevent=!0,"history"===N.mode?history.pushState({},null,this.location):window.location.hash=this.location,N.prevent=!1);var e=this.next;if(!e)return z=null;var t=function(e){var t={},n=-1!==e.indexOf("?")?e.split("?")[1]:"";return""===(n=String(n).trim().replace(/^(\?|#|&)/,""))?t:(n.split("&").forEach(function(e){var n=e.replace(/\+/g," ").split("="),r=decodeURIComponent(n.shift()),o=n.length>0?decodeURIComponent(n.join("=")):null;void 0===t[r]&&(t[r]=o)}),t)}(this.location),n=function(e,t){var n={},r=Z(t.path,!0).split("/").filter(Boolean);return Z(e,!0).split("/").filter(Boolean).forEach(function(e,t){if(void 0!==r[t]&&":".charCodeAt(0)===r[t].charCodeAt(0)){var o=r[t].substring(1);n[o]=decodeURIComponent(e)}}),n}(this.location,e);e._query=t,e._params=n,z=e}],n("routeAfterChange")))}catch(e){console.warn("[V] Route error:",e)}}function U(e){var t=Z(e,!0),n=null;for(let e=0;e<q.length;e++){var r=q[e];if(t.match(r.regex)){n=r;break}}return n}function V(e){return L(e,!0)}function H(e){window.history.go(e)}function J(){N.prevent||L("hash"===N.mode?window.location.hash.replace("#",""):window.location.href)}function K(e){var t=e.target.closest("a"),n=window.location,r=function(e){return e.href.replace(/#.*/,"")};e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||t.protocol&&n.protocol!==t.protocol||t.hostname&&n.hostname!==t.hostname||"hash"!==N.mode&&t.href&&t.href.indexOf("#")>-1&&r(t)===r(n)||t.target&&""!==t.target||e.defaultPrevented||(V(t.href),e.preventDefault())}var F=Object.freeze({__proto__:null,options:N,beforeChange:function(e){n("routeBeforeChange",e)},afterChange:function(e){n("routeAfterChange",e)},add:function e(t){if(Array.isArray(t))return t.forEach(function(t){e(t)});var n=Object.assign({},T,t);n.path=Z(n.path,!0);var r=n.path,o=["([^/]+)"];["(:[a-zA-Z]+)"].forEach(function(e,t){r=r.replace(new RegExp(e,"g"),o[t])}),n.regex=new RegExp("^"+r+"$","i"),q.push(n)},change:L,match:U,active:function(){return z},redirect:V,go:H,forward:function(e){H(void 0===e?1:e)},back:function(e){H(void 0===e?-1:e)},attachEvents:function(){l(window,"popstate",J),l(document,"click","a",K)}}),G={};function W(e){return e instanceof Object&&(e=JSON.stringify(e)),e}function Q(e){try{e=JSON.parse(e)}catch(e){}return e}var X={set:function(e,t){localStorage.setItem(e,W(t))},get:function(e,t){var n=localStorage.getItem(e);return n=null==(n=Q(n))?t:n},remove:function(e){localStorage.removeItem(e)},items:function(){return localStorage}},Y={set:function(e,t){sessionStorage.setItem(e,W(t))},get:function(e,t){var n=sessionStorage.getItem(e);return n=null==(n=Q(n))?t:n},remove:function(e){sessionStorage.removeItem(e)},items:function(){return sessionStorage}},ee=Object.freeze({__proto__:null,set:function(e,t){G[e]=t},get:function(e,t){var n=G[e];return n=null==(n=null==n?X.get(e):n)?t:n},remove:function(e){delete G[e]},items:function(){return G},local:X,session:Y});return e.$=i,e.$$=c,e.$$$=s,e.__version="1.0.10",e.afterDestroy=function(e){n("componentAfterDestroy",e)},e.afterMount=I,e.afterRender=function(e){n("componentAfterRender",e)},e.beforeDestroy=k,e.beforeMount=function(e){n("componentBeforeMount",e)},e.beforeRender=function(e){n("componentBeforeRender",e)},e.component=async function(e,t){var n=Object.assign({},C,t);n.selector=e,n.namespace||(n.namespace=e.replace(/[\W_]+/g,"_"));try{var r=[].concat([n.constructor]);await m(n,r),R.push(n)}catch(e){console.warn("[V] Component construct error:",e)}return n},e.destroy=x,e.each=r,e.eachComponent=D,e.extendComponent=S,e.fakePromise=v,e.fire=w,e.helper=function(e,t){_[e]=t},e.hook=n,e.http=P,e.mount=M,e.namespaceEvent=o,e.off=p,e.on=l,e.promises=m,e.promisify=d,e.removeComponent=async function(e){var t=null,n=null;if(R.forEach(function(r,o){r.selector===e&&(t=r,n=o)}),t)try{var r=[].concat([t.destructor]);await m(t,r),delete R[n]}catch(e){console.warn("[V] Component destruct error:",e)}},e.route=F,e.store=ee,e.template=O,e.trigger=h,e.unwatch=b,e.watch=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});