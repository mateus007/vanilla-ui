var V=function(e){"use strict";var t=[];function n(e,n){if(void 0===n)return t[e]?t[e]:[];t[e]=t[e]||[],t[e].push(n)}function r(e,t){if(Array.isArray(e))return e.forEach(t);const n=Object.keys(e);for(const r of n)t(e[r],r,e)}function o(e,t){var n=e.split(".");return{event:n.shift(),namespace:n.join("."),callback:t}}function a(e){return e=(e="string"==typeof e?c(e):e)instanceof Node?e:document}function c(e,t){return a(t).querySelector(e)}function i(e,t){return a(t).querySelectorAll(e)}function s(e,t){var n=[];return"string"==typeof e&&(e=i(e,t)),e instanceof Window&&n.push(e),e instanceof HTMLDocument&&n.push(e),e instanceof Element&&n.push(e),e instanceof NodeList&&Array.prototype.forEach.call(e,function(e){n.push(e)}),n}var u=[];function f(e,t,n,r,a){var c=n.split(" ");if(!(c.length>1)){var i,l=s(t);void 0===a?(i=r,r=null):i=function(e){var t=e.target.closest(r);t&&a.apply(t,[e])};var p=o(n,i);return"add"===e?(u.push(p),l.forEach(function(e){e.addEventListener(p.event,p.callback.bind(e),!1)})):u=u.filter(function(e){var t=Boolean(!(p.event&&p.event===e.event||p.namespace&&p.namespace===e.namespace||"function"==typeof i&&i===e.callback));return t||l.forEach(function(t){t.removeEventListener(e.event,e.callback.bind(t),!1)}),t}),i}for(var h=0;h<c.length;h++)f(e,t,c[h],r,a)}function l(e,t,n,r){return f("add",e,t,n,r)}function p(e,t,n,r){return f("remove",e,t,n,r)}function h(e,t,n){var r=n?s(n,e):s(e),o=document.createEvent("HTMLEvents");o.initEvent(t,!0,!0),r.forEach(function(e){e.dispatchEvent(o)})}async function d(){}async function v(e,t,n){try{return await t.apply(e,n)}catch(e){return Promise.reject(e)}}async function m(e,t){var n=[];for(let r=0;r<t.length;r++)"function"==typeof t[r]&&n.push(v(e,t[r]));return await Promise.all(n),e}var y=[];function g(e,t){y.push(o(e,t))}function _(e,t){var n=o(e,t);y=y.filter(function(e){return Boolean(!(n.event&&n.event===e.event||n.namespace&&n.namespace===e.namespace||void 0!==n.callback&&n.callback===e.callback))})}function w(e,t){var n=o(e),r=[];return y.forEach(function(e){n.event&&n.event!==e.event||n.namespace&&n.namespace!==e.namespace||r.push(v({},e.callback,[t]))}),Promise.all(r)}var b={};function E(e){return e.replace(/\s+/g," ").replace(/^{{\s?/,"").replace(/\s?}}$/,"")}function $(e){return e.replace(/^if\s?(.*)$/,"if( $1 ){").replace(/^elseif\s?(.*)$/,"}else if( $1 ){").replace(/^else$/,"}else{").replace(/^end$/,"}")}function A(e){return e.replace(/^for\s?(.*)\sin\s(.*)$/,"for( var $1 in $2 ){").replace(/^each\s?(.*)\s?=>\s?(.*)\sin\s(.*)$/,"for( var $1 in $3 ){ var $2 = $3[$1];").replace(/^each\s?(.*)\sin\s(.*)$/,"for( var _$1 in $2 ){ var $1 = $2[_$1];")}function j(e){var t=[],n=function(n){var r=e.match(n);r&&t.push(r[1])};return null===e.match(/^(}|for\(|if\()/)&&n(/^([A-Za-z0-9_]+)/),n(/^if\(\s?!?([A-Za-z0-9_]+)/),n(/^}else\sif\(\s?!?([A-Za-z0-9_]+)/),n(/&&\s?!?([A-Za-z0-9_]+)/),n(/\|\|\s?!?([A-Za-z0-9_]+)/),n(/in\s([A-Za-z0-9_]+)\s\)/),t}function O(e,t){var n,o=/{{([^}}]+)?}}/g,a=[],c=0,i="",s="",u="";for(r(t=Object.assign({},b,t||{}),function(e,t){a.push("var "+t+' = this["'+t+'"];')}),a.push("var r = [];");n=o.exec(e);)i=A(i=$(i=E(n[0]))),s=e.slice(c,n.index),c=n.index+n[0].length,a.push("r.push(`"+s.replace(/"/g,'\\"')+"`);"),j(i).filter(function(e){void 0===t[e]&&a.push("var "+e+";")}),a.push(i.match(/^(}|{|for\(|if\()/)?i:"r.push("+i+");");u=e.substr(c,e.length-c),a.push("r.push(`"+u.replace(/"/g,'\\"')+"`);"),a.push('return r.join("");');var f=a.join("\n");try{var l=new Function(f.replace(/[\r\t\n]/g,"")).apply(t||{})}catch(t){console.warn("[V] template parser error:",e,t)}return l}var R=[],C={element:null,selector:null,namespace:null,constructor:d,destructor:d};function S(e){Object.assign(C,e)}function M(e,t){R.forEach(function(n){s(n.selector,e).forEach(function(e){void 0===e._components&&(e._components={}),void 0===e._state&&(e._state={}),t.apply(e,[e,n])})})}function D(e){n("componentBeforeDestroy",e)}async function k(e){var t=[];return M(e,function(e,r){var o=r.namespace;if(void 0!==e._components[o]){var a=e._components[o];delete e._components[o];var c=[].concat(n("componentBeforeDestroy"),[a.beforeDestroy],[a.onDestroy],[a.afterDestroy],n("componentAfterDestroy"));t.push(m(a,c))}}),await Promise.all(t),e}function x(e){n("componentAfterMount",e)}async function I(e){var t=[];return M(e,function(e,r){var o=r.namespace;if(void 0===e._components[o]){e.dataset.vid||(e.dataset.vid=Math.random().toString(16).substr(2,8));var a=Object.assign({},r);a.element=e,e._components[o]=a;var c=[].concat(n("componentBeforeMount"),[a.beforeMount],[a.onMount],[a.afterMount],n("componentAfterMount"));t.push(m(a,c))}}),await Promise.all(t),e}async function B(e,t,r,o){var a={method:e,url:t,data:r,headers:o};await m(a,n("httpInterceptBefore"));var c=Object.assign({},a);if(delete c.url,delete c.data,"GET"!=c.method)void 0!==c.body&&null!==c.body||(c.body=a.data,c.body instanceof FormData==!1&&(c.body=JSON.stringify(c.body),c.headers["Content-Type"]="application/json; charset=utf8"));else{var i="";"string"==typeof a.data?i=a.data:a.data&&(i=Object.keys(a.data).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a.data[e])}).join("&")),i&&(a.url+="?"+i)}var s=await fetch(a.url,c),u=await s.text();try{u=JSON.parse(u)}catch(e){}var f={request:a,response:s,body:u};if(await m(f,n("httpInterceptAfter")),!s.ok)throw f;return u}S({beforeDestroy:d,onDestroy:d,afterDestroy:d}),S({on:function(e,t,n){void 0===n&&(n=t,t="");var r=this.element,o=[e,this.namespace,r.dataset.vid].join(".");return l(r,o,t,n)},off:function(e,t){var n=this.element,r=[e,this.namespace,n.dataset.vid].join(".");return p(n,r,t)},trigger:function(e,t){var n=this.element,r=[e,this.namespace,n.dataset.vid].join(".");return h(n,r,t)}}),D(async function(){return this.off()}),S({watch:function(e,t){return g([e,this.namespace,this.element.dataset.vid].join("."),t)},unwatch:function(e,t){return _([e,this.namespace,this.element.dataset.vid].join("."),t)},fire:function(e,t){return w([e,this.namespace,this.element.dataset.vid].join("."),t)}}),D(async function(){return this.unwatch()}),S({beforeMount:d,onMount:d,afterMount:d}),S({template:d,renderTemplate:async function(){var e=this.element.innerHTML,t=await this.template();if(null!=t&&!1!==t){var n=this.get(),r=O(String(t),n);r!=e&&(await k(this.element),this.element.innerHTML=r)}},shouldRender:async function(){return!0},beforeRender:d,onRender:d,afterRender:d,render:async function(e){void 0!==e&&this.set(e);if(await this.shouldRender())try{var t=[].concat(n("componentBeforeRender"),[this.beforeRender],[this.renderTemplate],[this.onRender],[this.afterRender],n("componentAfterRender"));await m(this,t),await I(this.element)}catch(e){console.warn("[V] Component render error:",e)}}}),x(async function(){return this.render()}),S({set:function(e,t){var n=this.element;"string"==typeof e?n._state[e]=t:n._state=Object.assign(n._state,e)},get:function(e,t){var n=this.element;if(void 0===e)return n._state;var r=n._state[e];return r=void 0===r?t:r}});var T=Object.freeze({__proto__:null,interceptBefore:function(e){n("httpInterceptBefore",e)},interceptAfter:function(e){n("httpInterceptAfter",e)},request:B,options:function(e,t,n){return B("OPTIONS",e,t,n)},head:function(e,t,n){return B("HEAD",e,t,n)},get:function(e,t,n){return B("GET",e,t,n)},post:function(e,t,n){return B("POST",e,t,n)},put:function(e,t,n){return B("PUT",e,t,n)},patch:function(e,t,n){return B("PATCH",e,t,n)},_delete:function(e,t,n){return B("DELETE",e,t,n)}}),P={path:null,regex:null,_query:{},_params:{},param(e){return void 0===e?this._params:void 0!==this._params[e]?this._params[e]:void 0},query(e){return void 0===e?this._query:void 0!==this._query[e]?this._query[e]:void 0},location(){var e=this._params,t=this.path;for(const n in e)e.hasOwnProperty(n)&&(t=t.replace(":"+n,e[n]));return t}},q=[],z=P,L={mode:window.history.pushState?"history":"hash",base:"",prevent:!1};function N(e,t){return e=("/"+(e=(e=(e=(e=e.replace(window.location.origin,"")).replace(L.base,"")).replace(new RegExp("[/]*$"),"")).replace(new RegExp("^[/]*"),""))).replace("//","/").replace("/?","?"),t&&(e=e.split("?")[0]),e}async function Z(e,t){try{e=N(e);var r={previous:z,next:H(e),location:e,replace:t};await m(r,[].concat(n("routeBeforeChange"),[function(){this.replace&&(L.prevent=!0,"history"===L.mode?history.pushState({},null,this.location):window.location.hash=this.location,L.prevent=!1);var e=this.next;if(!e)return z=null;var t=function(e){var t={},n=-1!==e.indexOf("?")?e.split("?")[1]:"";return""===(n=String(n).trim().replace(/^(\?|#|&)/,""))?t:(n.split("&").forEach(function(e){const n=e.replace(/\+/g," ").split("="),r=decodeURIComponent(n.shift()),o=n.length>0?decodeURIComponent(n.join("=")):null;void 0===t[r]&&(t[r]=o)}),t)}(this.location),n=function(e,t){var n={},r=N(t.path,!0).split("/").filter(Boolean);return N(e,!0).split("/").filter(Boolean).forEach(function(e,t){if(void 0!==r[t]&&":".charCodeAt(0)===r[t].charCodeAt(0)){const o=r[t].substr(1);n[o]=decodeURIComponent(e)}}),n}(this.location,e);e._query=t,e._params=n,z=e}],n("routeAfterChange")))}catch(e){console.warn("[V] Route error:",e)}}function H(e){var t=N(e,!0),n=null;for(let e=0;e<q.length;e++){const r=q[e];if(t.match(r.regex)){n=r;break}}return n}function U(e){return Z(e,!0)}function V(e){window.history.go(e)}function J(){L.prevent||Z("hash"===L.mode?window.location.hash.replace("#",""):window.location.href)}function K(e){var t=e.target.closest("a"),n=window.location,r=function(e){return e.href.replace(/#.*/,"")};e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||t.protocol&&n.protocol!==t.protocol||t.hostname&&n.hostname!==t.hostname||"hash"!==L.mode&&t.href&&t.href.indexOf("#")>-1&&r(t)===r(n)||t.target&&""!==t.target||e.defaultPrevented||(U(t.href),e.preventDefault())}var F=Object.freeze({__proto__:null,options:L,beforeChange:function(e){n("routeBeforeChange",e)},afterChange:function(e){n("routeAfterChange",e)},add:function e(t){if(Array.isArray(t))return t.forEach(function(t){e(t)});var n=Object.assign({},P,t);n.path=N(n.path,!0);var r=n.path,o=["([^/]+)"];["(:[a-zA-Z]+)"].forEach(function(e,t){r=r.replace(new RegExp(e,"g"),o[t])}),n.regex=new RegExp("^"+r+"$","i"),q.push(n)},change:Z,match:H,active:function(){return z},redirect:U,go:V,forward:function(e){V(void 0===e?1:e)},back:function(e){V(void 0===e?-1:e)},attachEvents:function(){l(window,"popstate",J),l(document,"click","a",K)}}),G={};function W(e){return e instanceof Object&&(e=JSON.stringify(e)),e}function Q(e){try{e=JSON.parse(e)}catch(e){}return e}const X={set:function(e,t){localStorage.setItem(e,W(t))},get:function(e,t){var n=localStorage.getItem(e);return n=null==(n=Q(n))?t:n},remove:function(e){localStorage.removeItem(e)},items:function(){return localStorage}},Y={set:function(e,t){sessionStorage.setItem(e,W(t))},get:function(e,t){var n=sessionStorage.getItem(e);return n=null==(n=Q(n))?t:n},remove:function(e){sessionStorage.removeItem(e)},items:function(){return sessionStorage}};var ee=Object.freeze({__proto__:null,set:function(e,t){G[e]=t},get:function(e,t){var n=G[e];return n=null==(n=null==n?X.get(e):n)?t:n},remove:function(e){delete G[e]},items:function(){return G},local:X,session:Y});return e.$=c,e.$$=i,e.$$$=s,e.__version="1.0.8",e.afterDestroy=function(e){n("componentAfterDestroy",e)},e.afterMount=x,e.afterRender=function(e){n("componentAfterRender",e)},e.beforeDestroy=D,e.beforeMount=function(e){n("componentBeforeMount",e)},e.beforeRender=function(e){n("componentBeforeRender",e)},e.component=async function(e,t){var n=Object.assign({},C,t);n.selector=e,n.namespace||(n.namespace=e.replace(/[\W_]+/g,"_"));try{var r=[].concat([n.constructor]);await m(n,r),R.push(n)}catch(e){console.warn("[V] Component construct error:",e)}return n},e.destroy=k,e.each=r,e.eachComponent=M,e.extendComponent=S,e.fakePromise=d,e.fire=w,e.helper=function(e,t){b[e]=t},e.hook=n,e.http=T,e.mount=I,e.namespaceEvent=o,e.off=p,e.on=l,e.promises=m,e.promisify=v,e.removeComponent=async function(e){var t=null,n=null;if(R.forEach(function(r,o){r.selector===e&&(t=r,n=o)}),t)try{var r=[].concat([t.destructor]);await m(t,r),delete R[n]}catch(e){console.warn("[V] Component destruct error:",e)}},e.route=F,e.store=ee,e.template=O,e.trigger=h,e.unwatch=_,e.watch=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});