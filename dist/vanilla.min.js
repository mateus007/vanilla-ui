var V=function(e){"use strict";var t=[];function n(e,n){if(void 0===n)return t[e]?t[e]:[];t[e]=t[e]||[],t[e].push(n)}function r(e,t){if(Array.isArray(e))return e.forEach(t);const n=Object.keys(e);for(const r of n)t(e[r],r,e)}function o(e){return e=(e="string"==typeof e?a(e):e)instanceof Node?e:document}function a(e,t){return o(t).querySelector(e)}function i(e,t){return o(t).querySelectorAll(e)}function c(e,t){var n=[];return"string"==typeof e&&(e=i(e,t)),e instanceof Window&&n.push(e),e instanceof HTMLDocument&&n.push(e),e instanceof Element&&n.push(e),e instanceof NodeList&&Array.prototype.forEach.call(e,function(e){n.push(e)}),n}function s(e,t,n,r,o){var a,i=c(t),s=n.split(" ");return void 0===o?(a=r,r=null):a=function(e){var t=e.target.closest(r);t&&o.apply(t,[e])},i.forEach(function(t){for(var n=0;n<s.length;n++)"add"===e?t.addEventListener(s[n],a.bind(t),!1):t.removeEventListener(s[n],a.bind(t),!1)}),a}function u(e,t,n,r){return s("add",e,t,n,r)}function f(e,t,n,r){return s("remove",e,t,n,r)}function l(e,t){var n=c(e),r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),n.forEach(function(e){e.dispatchEvent(r)})}async function p(){}async function h(e,t,n){try{return await t.apply(e,n)}catch(e){return Promise.reject(e)}}async function d(e,t){var n=[];for(let r=0;r<t.length;r++)"function"==typeof t[r]&&n.push(h(e,t[r]));return await Promise.all(n),e}var v=[];function m(e,t){var n=e.split("."),r=n.shift(),o=n.join(".");v.push([r,o,t])}function y(e,t){var n=e.split("."),r=n.shift(),o=n.join(".");v=v.filter(function(e){return Boolean(!(r&&r===e[0]||o&&o===e[1]||void 0!==t&&t===e[2]))})}function g(e,t){var n=e.split("."),r=n.shift(),o=n.join("."),a=[];return v.forEach(function(e){r&&r!==e[0]||o&&o!==e[1]||a.push(h({},e[2],[t]))}),Promise.all(a)}var _={};function w(e){return e.replace(/\s+/g," ").replace(/^{{\s?/,"").replace(/\s?}}$/,"")}function b(e){return e.replace(/^if\s?(.*)$/,"if( $1 ){").replace(/^else$/,"} else {").replace(/^end$/,"}")}function E(e){return e.replace(/^for\s?(.*)\sin\s(.*)$/,"for( var $1 in $2 ){").replace(/^each\s?(.*)\s?=>\s?(.*)\sin\s(.*)$/,"for( var $1 in $3 ){ var $2 = $3[$1];").replace(/^each\s?(.*)\sin\s(.*)$/,"for( var _$1 in $2 ){ var $1 = $2[_$1];")}function $(e){var t=[],n=function(n){var r=e.match(n);r&&t.push(r[1])};return n(/^(?!}|for\(|if\()([A-Za-z0-9_]+)/),n(/^if\(\s?!?([A-Za-z0-9_]+)/),n(/&&\s?!?([A-Za-z0-9_]+)/),n(/\|\|\s?!?([A-Za-z0-9_]+)/),n(/in\s([A-Za-z0-9_]+)\s\)/),t}function A(e,t){var n,o=/{{([^}}]+)?}}/g,a=[],i=0,c="",s="",u="";for(r(t=Object.assign({},_,t||{}),function(e,t){a.push("var "+t+' = this["'+t+'"];')}),a.push("var r = [];");n=o.exec(e);)c=E(c=b(c=w(n[0]))),s=e.slice(i,n.index),i=n.index+n[0].length,a.push("r.push(`"+s.replace(/"/g,'\\"')+"`);"),$(c).filter(function(e){void 0===t[e]&&a.push("var "+e+";")}),a.push(c.match(/^(}|{|for\(|if\()/)?c:"r.push("+c+");");u=e.substr(i,e.length-i),a.push("r.push(`"+u.replace(/"/g,'\\"')+"`);"),a.push('return r.join("");');var f=a.join("\n");try{var l=new Function(f.replace(/[\r\t\n]/g,"")).apply(t||{})}catch(t){console.warn("[V] template parser error:",e,t)}return l}var j=[],O={element:null,selector:null,namespace:null,constructor:p,destructor:p};function R(e){Object.assign(O,e)}function C(e,t){j.forEach(function(n){c(n.selector,e).forEach(function(e){void 0===e._components&&(e._components={}),void 0===e._state&&(e._state={}),void 0===e._events&&(e._events={}),t.apply(e,[e,n])})})}function S(e){n("componentBeforeDestroy",e)}async function D(e){var t=[];return C(e,function(e,r){var o=r.namespace;if(void 0!==e._components[o]){var a=e._components[o];delete e._components[o];var i=[].concat(n("componentBeforeDestroy"),[a.beforeDestroy],[a.onDestroy],[a.afterDestroy],n("componentAfterDestroy"));t.push(d(a,i))}}),await Promise.all(t),e}function M(e){n("componentAfterMount",e)}async function x(e){var t=[];return C(e,function(e,r){var o=r.namespace;if(void 0===e._components[o]){e.dataset.vid||(e.dataset.vid=Math.random().toString(16).substr(2,8));var a=Object.assign({},r);a.element=e,e._components[o]=a;var i=[].concat(n("componentBeforeMount"),[a.beforeMount],[a.onMount],[a.afterMount],n("componentAfterMount"));t.push(d(a,i))}}),await Promise.all(t),e}async function I(e,t,r,o){var a={method:e,url:t,data:r,headers:o};await d(a,n("httpInterceptBefore"));var i=Object.assign({},a);if(delete i.url,delete i.data,"GET"!=i.method)void 0!==i.body&&null!==i.body||(i.body=a.data,i.body instanceof FormData==!1&&(i.body=JSON.stringify(i.body),i.headers["Content-Type"]="application/json; charset=utf8"));else{var c="";"string"==typeof a.data?c=a.data:a.data&&(c=Object.keys(a.data).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a.data[e])}).join("&")),c&&(a.url+="?"+c)}var s=await fetch(a.url,i),u=await s.text();try{u=JSON.parse(u)}catch(e){}var f={request:a,response:s,body:u};if(await d(f,n("httpInterceptAfter")),!s.ok)throw f;return u}R({beforeDestroy:p,onDestroy:p,afterDestroy:p}),R({on:function(e,t,n){var r=this.element;void 0===n?(n=t,t=this.selector):t=this.selector+" "+t;var o=e+"-"+t,a=r.dataset.vid;a='[data-vid="'+a+'"]';r._events[o]=u(document,e,t,function(e){e.target.closest(a)&&n.apply(e.target.closest(t),[e])})},off:function(e,t){var n=this.element,r=e+"-"+(t=t?this.selector+" "+t:this.selector),o=n._events[r];o&&(delete n._events[r],f(document,e,t,o))},trigger:function(e,t){l(t=t?this.selector+" "+t:this.selector,e)}}),R({watch:function(e,t){return m([e,this.namespace,this.element.dataset.vid].join("."),t)},unwatch:function(e,t){return y([e,this.namespace,this.element.dataset.vid].join("."),t)},fire:function(e,t){return g(e,t)}}),S(async function(){return this.unwatch()}),R({beforeMount:p,onMount:p,afterMount:p}),R({template:p,renderTemplate:async function(){var e=await this.template();if(void 0!==e&&!1!==e){var t=this.get(),n=A(String(e),t);this.element.innerHTML=n}},shouldRender:async function(){return!0},beforeRender:p,onRender:p,afterRender:p,render:async function(e){void 0!==e&&this.set(e);if(await this.shouldRender())try{await D(this.element);var t=[].concat(n("componentBeforeRender"),[this.beforeRender],[this.renderTemplate],[this.onRender],[this.afterRender],n("componentAfterRender"));await d(this,t),await x(this.element)}catch(e){console.warn("[V] Component render error:",e)}}}),M(async function(){return this.render()}),R({set:function(e,t){var n=this.element;"string"==typeof e?n._state[e]=t:n._state=Object.assign(n._state,e)},get:function(e,t){var n=this.element;if(void 0===e)return n._state;var r=n._state[e];return r=void 0===r?t:r}});var B=Object.freeze({__proto__:null,interceptBefore:function(e){n("httpInterceptBefore",e)},interceptAfter:function(e){n("httpInterceptAfter",e)},request:I,options:function(e,t,n){return I("OPTIONS",e,t,n)},head:function(e,t,n){return I("HEAD",e,t,n)},get:function(e,t,n){return I("GET",e,t,n)},post:function(e,t,n){return I("POST",e,t,n)},put:function(e,t,n){return I("PUT",e,t,n)},patch:function(e,t,n){return I("PATCH",e,t,n)},_delete:function(e,t,n){return I("DELETE",e,t,n)}}),P={path:null,regex:null,_query:{},_params:{},param(e){return void 0===e?this._params:void 0!==this._params[e]?this._params[e]:void 0},query(e){return void 0===e?this._query:void 0!==this._query[e]?this._query[e]:void 0},location(){var e=this._params,t=this.path;for(const n in e)e.hasOwnProperty(n)&&(t=t.replace(":"+n,e[n]));return t}},T=[],q=P,z={mode:window.history.pushState?"history":"hash",base:"",prevent:!1};function k(e,t){return e=("/"+(e=(e=(e=(e=e.replace(window.location.origin,"")).replace(z.base,"")).replace(new RegExp("[/]*$"),"")).replace(new RegExp("^[/]*"),""))).replace("//","/").replace("/?","?"),t&&(e=e.split("?")[0]),e}async function L(e,t){try{e=k(e);var r={previous:q,next:N(e),location:e,replace:t};await d(r,[].concat(n("routeBeforeChange"),[function(){this.replace&&(z.prevent=!0,"history"===z.mode?history.pushState({},null,this.location):window.location.hash=this.location,z.prevent=!1);var e=this.next;if(!e)return q=null;var t=function(e){var t={},n=-1!==e.indexOf("?")?e.split("?")[1]:"";return""===(n=String(n).trim().replace(/^(\?|#|&)/,""))?t:(n.split("&").forEach(function(e){const n=e.replace(/\+/g," ").split("="),r=decodeURIComponent(n.shift()),o=n.length>0?decodeURIComponent(n.join("=")):null;void 0===t[r]&&(t[r]=o)}),t)}(this.location),n=function(e,t){var n={},r=k(t.path,!0).split("/").filter(Boolean);return k(e,!0).split("/").filter(Boolean).forEach(function(e,t){if(void 0!==r[t]&&":".charCodeAt(0)===r[t].charCodeAt(0)){const o=r[t].substr(1);n[o]=decodeURIComponent(e)}}),n}(this.location,e);e._query=t,e._params=n,q=e}],n("routeAfterChange")))}catch(e){console.warn("[V] Route error:",e)}}function N(e){var t=k(e,!0),n=null;for(let e=0;e<T.length;e++){const r=T[e];if(t.match(r.regex)){n=r;break}}return n}function U(e){return L(e,!0)}function V(e){window.history.go(e)}function Z(){z.prevent||L("hash"===z.mode?window.location.hash.replace("#",""):window.location.href)}function H(e){var t=e.target.closest("a"),n=window.location,r=function(e){return e.href.replace(/#.*/,"")};e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||t.protocol&&n.protocol!==t.protocol||t.hostname&&n.hostname!==t.hostname||"hash"!==z.mode&&t.href&&t.href.indexOf("#")>-1&&r(t)===r(n)||t.target&&""!==t.target||e.defaultPrevented||(U(t.href),e.preventDefault())}var J=Object.freeze({__proto__:null,options:z,beforeChange:function(e){n("routeBeforeChange",e)},afterChange:function(e){n("routeAfterChange",e)},add:function e(t){if(Array.isArray(t))return t.forEach(function(t){e(t)});var n=Object.assign({},P,t);n.path=k(n.path,!0);var r=n.path,o=["([^/]+)"];["(:[a-zA-Z]+)"].forEach(function(e,t){r=r.replace(new RegExp(e,"g"),o[t])}),n.regex=new RegExp("^"+r+"$","i"),T.push(n)},change:L,match:N,active:function(){return q},redirect:U,go:V,forward:function(e){V(void 0===e?1:e)},back:function(e){V(void 0===e?-1:e)},attachEvents:function(){u(window,"popstate",Z),u(document,"click","a",H)}}),K={};function F(e){return e instanceof Object&&(e=JSON.stringify(e)),e}function G(e){try{e=JSON.parse(e)}catch(e){}return e}const W={set:function(e,t){localStorage.setItem(e,F(t))},get:function(e,t){var n=localStorage.getItem(e);return n=void 0===(n=G(n))?t:n},remove:function(e){localStorage.removeItem(e)},items:function(){return localStorage}},Q={set:function(e,t){sessionStorage.setItem(e,F(t))},get:function(e,t){var n=sessionStorage.getItem(e);return n=void 0===(n=G(n))?t:n},remove:function(e){sessionStorage.removeItem(e)},items:function(){return sessionStorage}};var X=Object.freeze({__proto__:null,set:function(e,t){K[e]=t},get:function(e,t){var n=K[e];return n=void 0===(n=void 0===n?W.get(e):n)?t:n},remove:function(e){delete K[e]},items:function(){return K},local:W,session:Q});return e.$=a,e.$$=i,e.$$$=c,e.__version="1.0.5",e.afterDestroy=function(e){n("componentAfterDestroy",e)},e.afterMount=M,e.afterRender=function(e){n("componentAfterRender",e)},e.beforeDestroy=S,e.beforeMount=function(e){n("componentBeforeMount",e)},e.beforeRender=function(e){n("componentBeforeRender",e)},e.component=async function(e,t){var n=Object.assign({},O,t);n.selector=e,n.namespace||(n.namespace=e.replace(/[\W_]+/g,"_"));try{var r=[].concat([n.constructor]);await d(n,r),j.push(n)}catch(e){console.warn("[V] Component construct error:",e)}return n},e.destroy=D,e.each=r,e.eachComponent=C,e.extendComponent=R,e.fakePromise=p,e.fire=g,e.helper=function(e,t){_[e]=t},e.hook=n,e.http=B,e.mount=x,e.off=f,e.on=u,e.promises=d,e.promisify=h,e.removeComponent=async function(e){var t=null,n=null;if(j.forEach(function(r,o){r.selector===e&&(t=r,n=o)}),t)try{var r=[].concat([t.destructor]);await d(t,r),delete j[n]}catch(e){console.warn("[V] Component destruct error:",e)}},e.route=J,e.store=X,e.template=A,e.trigger=l,e.unwatch=y,e.watch=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});