window.V={each:function(e,t){if(Array.isArray(e))e.forEach(t);else{const o=Object.keys(e);for(const n of o)t(e[n],n,e)}},extend:function(e,t){this.each(t,function(t,o){void 0!==e[o]&&console.warn("Warning, the method {key} is being overwrite be another plugin",o),e[o]=t})},promisify:function(e,t){return new Promise(function(o,n){return t.apply(e,[o,n])})},fakePromise:function(e){e(this)},promises:async function(e,t){const o=this;var n=[];for(let r=0;r<t.length;r++)"function"==typeof t[r]&&n.push(o.promisify(e,t[r]));return await Promise.all(n),e}},function(e){e.extend(e,{$:function(e,t){return(t=(t=t instanceof String?this.$(t):t)instanceof Node?t:document).querySelector(e)},$$:function(e,t){return(t=(t=t instanceof String?this.$(t):t)instanceof Node?t:document).querySelectorAll(e)},items:function(e,t){var o=[];return"string"==typeof e&&(e=this.$$(e,t)),e instanceof Window&&o.push(e),e instanceof HTMLDocument&&o.push(e),e instanceof Element&&o.push(e),e instanceof NodeList&&Array.prototype.forEach.call(e,function(e){o.push(e)}),o}})}(window.V),function(e){var t=function(t,o,n,r,s){var i,c=e.items(o);return void 0===s?(i=r,r=null):i=function(e){var t=e.target.closest(r);t&&s.apply(t,[e])},n=n.split(" "),c.forEach(function(e){for(var o=0;o<n.length;o++)"add"==t?e.addEventListener(n[o],i.bind(e),!1):e.removeEventListener(n[o],i.bind(e),!1)}),i};e.extend(e,{on:function(e,o,n,r){return t("add",e,o,n,r)},off:function(e,o,n,r){return t("remove",e,o,n,r)},trigger:function(e,t){var o=this.items(e),n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),o.forEach(function(e){e.dispatchEvent(n)})}})}(window.V),function(e){var t={beforeConstructorHooks:[],afterConstructorHooks:[],beforeDestructorHooks:[],afterDestructorHooks:[]};e.extend(e,{_abstractComponent:{element:null,selector:null,namespace:null,constructor:e.fakePromise,destructor:e.fakePromise},_components:[],beforeConstructor:function(e){t.beforeConstructorHooks.push(e)},afterConstructor:function(e){t.afterConstructorHooks.push(e)},beforeDestructor:function(e){t.beforeDestructorHooks.push(e)},afterDestruct:function(e){t.afterDestructorHooks.push(e)},component:async function(e,o){var n=Object.assign({},this._abstractComponent,o);n.selector=e,n.namespace=e.replace(/[\W_]+/g,"_");try{var r=[].concat(t.beforeConstructorHooks,[n.constructor],t.afterConstructorHooks);await this.promises(n,r),this._components.push(n)}catch(e){console.warn("Component construct error:",e)}return n},removeComponent:async function(e){var o=null,n=null;if(this._components.forEach(function(t,r){t.selector==e&&(o=t,n=r)}),!o)return e;try{var r=[].concat(t.beforeDestructorHooks,[o.destructor],t.afterDestructorHooks);await this.promises(o,r),delete this._components[n]}catch(e){console.warn("Component destruct error:",e)}return e}})}(window.V),function(e){var t={beforeMountHooks:[],afterMountHooks:[]};e.extend(e._abstractComponent,{beforeMount:e.fakePromise,onMount:e.fakePromise,afterMount:e.fakePromise}),e.extend(e,{beforeMount:function(e){t.beforeMountHooks.push(e)},afterMount:function(e){t.afterMountHooks.push(e)},mount:async function(o){var n=[];return e._components.forEach(function(r){e.items(r.selector,o).forEach(function(o){void 0===o._components&&(o._components={});var s=r.namespace;if(void 0===o._components[s]){o._components[s]={},o.dataset.vid=Math.random().toString(16).substr(2,8),r.element=o;var i=[].concat(t.beforeMountHooks,[r.beforeMount][r.onMount],[r.afterMount],t.afterMountHooks);n.push(e.promises(r,i))}})}),await Promise.all(n),o}})}(window.V),function(e){var t={beforeRenderHooks:[],afterRenderHooks:[]};e.extend(e._abstractComponent,{shouldRender:e.fakePromise,beforeRender:e.fakePromise,onRender:e.fakePromise,afterRender:e.fakePromise}),e.extend(e,{beforeRender:function(e){t.beforeRenderHooks.push(e)},afterRender:function(e){t.afterRenderHooks.push(e)}});e.afterMount(async function(o){try{var n=[].concat([this.shouldRender],t.beforeRenderHooks,[this.beforeRender],[this.onRender],[this.afterRender],t.afterRenderHooks);await e.promises(this,n),await e.mount(this.element)}catch(e){console.warn("Component render error:",e)}return o(this)})}(window.V),function(e){var t={beforeDestroyHooks:[],afterDestroyHooks:[]};e.extend(e._abstractComponent,{beforeDestroy:e.fakePromise,onDestroy:e.fakePromise,afterDestroy:e.fakePromise}),e.extend(e,{beforeDestroy:function(e){t.beforeDestroyHooks.push(e)},afterDestroy:function(e){t.afterDestroyHooks.push(e)},destroy:async function(o){var n=[];return e._components.forEach(function(r){e.items(r.selector,o).forEach(function(o){if(void 0!==o._components){var s=r.namespace;if(void 0!==o._components[s]){r.element=o,delete o._components[s];var i=[].concat(t.beforeDestroyHooks,[r.beforeDestroy],[r.onDestroy],[r.afterDestroy],t.afterDestroyHooks);n.push(e.promises(r,i))}}})}),await Promise.all(n),o}})}(window.V),function(e){var t={events:{}};e.extend(e._abstractComponent,{on:function(o,n,r){var s=this;void 0===r?(r=n,n=s.selector):n=s.selector+" "+n;var i=s.element.dataset.vid;i='[data-vid="'+i+'"]';t.events[o]||(t.events[o]={}),t.events[o][n]=e.on(document,o,n,function(e){var t=e.target.closest(i);t&&(s.element=t,r.apply(e.target.closest(n),[e]))})},off:function(o,n){if(n=n?self.selector+" "+n:self.selector,t.events[o]){var r=t.events[o][n];r&&(delete t.events[o][n],e.off(document,o,n,r))}}})}(window.V),function(e){e.extend(e._abstractComponent,{set:function(e,t){return this.element._components[this.namespace][e]=t,this},get:function(e,t){var o=this.element._components[this.namespace][e];return void 0===o?t:o}})}(window.V),function(e){var t={interceptBeforeHooks:[],interceptAfterHooks:[]};e.extend(e,{http:{interceptBefore:function(e){t.interceptBeforeHooks.push(e)},interceptAfter:function(e){t.interceptAfterHooks.push(e)},request:async function(o,n,r,s){var i={method:o,url:n,data:r,headers:s,options:{},response:null};(i=await e.promises(i,t.interceptBeforeHooks)).headers&&(i.options.headers=i.headers),i.method&&(i.options.method=i.method);var c=function(e){var t={};return e instanceof FormData?t=e:"object"==typeof e?t=e:"string"==typeof e&&e.split("&").forEach(function(e){const o=e.replace(/\+/g," ").split("="),n=decodeURIComponent(o.shift()),r=o.length>0?decodeURIComponent(o.join("=")):null;void 0===t[n]&&(t[n]=r)}),t}(i.data);if("GET"!=i.options.method)!c instanceof FormData&&(c=JSON.stringify(c)),i.options.body=c;else{var a=Object.keys(c).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])}).join("&");a&&(i.url+="?"+a)}return new Promise(function(o,n){fetch(i.url,i.options).then(function(o){return i.response=o,e.promises(i,t.interceptAfterHooks)}).then(function(e){return e.response}).then(function(e){if(!e.ok)throw e;return e.text().then(function(e){try{return JSON.parse(e)}catch(t){return e}})}).then(function(e){o(e)}).catch(function(e){n(e)})})},get:function(e,t,o){return this.request("GET",e,t,o)},post:function(e,t,o){return this.request("POST",e,t,o)},put:function(e,t,o){return this.request("PUT",e,t,o)},delete:function(e,t,o){return this.request("DELETE",e,t,o)}}})}(window.V),function(e){e.extend(e,{local:{set:function(e,t){return t instanceof Object&&(t=JSON.stringify(t)),localStorage.setItem(e,t)},get:function(e,t){var o=localStorage.getItem(e);return 1==t&&o&&(o=JSON.parse(o)),o}}})}(window.V),function(e){e.extend(e,{session:{set:function(e,t){return t instanceof Object&&(t=JSON.stringify(t)),sessionStorage.setItem(e,t)},get:function(e,t){var o=sessionStorage.getItem(e);return 1==t&&o&&(o=JSON.parse(o)),o}}})}(window.V);